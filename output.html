<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.10: http://docutils.sourceforge.net/" />
<title>django-simpleimages</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7514 2012-09-14 14:27:12Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="django-simpleimages">
<h1 class="title">django-simpleimages</h1>

<a class="reference external image-reference" href="https://travis-ci.org/saulshanabrook/django-simpleimages"><img alt="https://travis-ci.org/saulshanabrook/django-simpleimages.png" src="https://travis-ci.org/saulshanabrook/django-simpleimages.png" /></a>
<a class="reference external image-reference" href="https://coveralls.io/r/saulshanabrook/django-simpleimages"><img alt="https://coveralls.io/repos/saulshanabrook/django-simpleimages/badge.png?branch=master" src="https://coveralls.io/repos/saulshanabrook/django-simpleimages/badge.png?branch=master" /></a>
<p><tt class="docutils literal"><span class="pre">django-simpleimages</span></tt> is an opinionated Django app which makes it very simple to
deal transforming images on models, with extremely minimal configuration, as long as:</p>
<ul class="simple">
<li>You want to define sizes in the model and not dynamically in the template</li>
<li>You provide your own storage backend</li>
<li>You want the transformation to happen when the model saves</li>
</ul>
<p>If any of the above don't hold true, then this library probably won't work for
you.  That said, if all of the above do hold true for you, then this app will
likely be the simplest and best way to apply tranformations to images.</p>
<div class="section" id="installation">
<h1>Installation</h1>
<p>Installation is as easy as:</p>
<pre class="literal-block">
pip install django-simpleimages
pip install pillow # or any other version of PIL
</pre>
<p>Done!</p>
</div>
<div class="section" id="usage">
<h1>Usage</h1>
<div class="section" id="models-py">
<h2>models.py</h2>
<p>Here is an example model that will create transformed images on save.</p>
<pre class="code python literal-block">
<span class="keyword namespace">from</span> <span class="name namespace">django.db</span> <span class="keyword namespace">import</span> <span class="name">models</span>
<span class="keyword namespace">import</span> <span class="name namespace">simpleimages</span>


<span class="keyword">class</span> <span class="name class">YourModel</span><span class="punctuation">(</span><span class="name">models</span><span class="operator">.</span><span class="name">Model</span><span class="punctuation">):</span>
    <span class="name">image</span> <span class="operator">=</span> <span class="name">models</span><span class="operator">.</span><span class="name">ImageField</span><span class="punctuation">(</span>
        <span class="name">upload_to</span><span class="operator">=</span><span class="literal string">'images/'</span>
    <span class="punctuation">)</span>
    <span class="name">thumbnail_image</span> <span class="operator">=</span> <span class="name">models</span><span class="operator">.</span><span class="name">ImageField</span><span class="punctuation">(</span>
        <span class="name">blank</span><span class="operator">=</span><span class="name builtin pseudo">True</span><span class="punctuation">,</span>
        <span class="name">null</span><span class="operator">=</span><span class="name builtin pseudo">True</span><span class="punctuation">,</span>
        <span class="name">editable</span><span class="operator">=</span><span class="name builtin pseudo">False</span><span class="punctuation">,</span>
        <span class="name">upload_to</span><span class="operator">=</span><span class="literal string">'transformed_images/thumbnails/'</span>
    <span class="punctuation">)</span>
    <span class="name">large_image</span> <span class="operator">=</span> <span class="name">models</span><span class="operator">.</span><span class="name">ImageField</span><span class="punctuation">(</span>
        <span class="name">blank</span><span class="operator">=</span><span class="name builtin pseudo">True</span><span class="punctuation">,</span>
        <span class="name">null</span><span class="operator">=</span><span class="name builtin pseudo">True</span><span class="punctuation">,</span>
        <span class="name">editable</span><span class="operator">=</span><span class="name builtin pseudo">False</span><span class="punctuation">,</span>
        <span class="name">upload_to</span><span class="operator">=</span><span class="literal string">'transformed_images/large/'</span>
    <span class="punctuation">)</span>

    <span class="name">transformed_fields</span> <span class="operator">=</span> <span class="punctuation">{</span>
        <span class="literal string">'image'</span><span class="punctuation">:</span> <span class="punctuation">{</span>
            <span class="literal string">'thumbnail_image'</span><span class="punctuation">:</span> <span class="name">simpleimages</span><span class="operator">.</span><span class="name">transforms</span><span class="operator">.</span><span class="name">scale</span><span class="punctuation">(</span><span class="name">width</span><span class="operator">=</span><span class="literal number integer">10</span><span class="punctuation">),</span>
            <span class="literal string">'large_image'</span><span class="punctuation">:</span> <span class="name">simpleimages</span><span class="operator">.</span><span class="name">transforms</span><span class="operator">.</span><span class="name">scale</span><span class="punctuation">(</span><span class="name">width</span><span class="operator">=</span><span class="literal number integer">200</span><span class="punctuation">),</span>
        <span class="punctuation">}</span>
    <span class="punctuation">}</span>

<span class="name">simpleimages</span><span class="operator">.</span><span class="name">track_model</span><span class="punctuation">(</span><span class="name">YourModel</span><span class="punctuation">)</span>
</pre>
<p><cite>simpleimages.track_model</cite> is called with the model to track.</p>
<p>The model should have a field called <cite>transformed_fields</cite> which is a
dictionary mapping original image fields to transformed fields.
Each of the original image keys maps to a dictionary which maps transformed
fields to transformations. The transformations are function that
take an image, from the <cite>file</cite> attribute of the original field, and return a
transformed instance of <a class="reference external" href="https://docs.djangoproject.com/en/dev/ref/files/file/#django.core.files.File">django.core.files.File:</a>
, not Python's built-in file object.</p>
</div>
<div class="section" id="management-command">
<h2>Management Command</h2>
<p>Since the images are only transformed on the save of the model, if you change
a transform, all the models will not be updated until you resave them.
If you want to retransform all the images in a model or app use the
<cite>retransform</cite> command.</p>
<pre class="code bash literal-block">
<span class="comment"># re-transforms and saves all models. If an app is specified then only
# the models in that app will be re transformed. If a model is specified
# then only that model in that app will be retransformed. If a field is
# specified within that model, then that field will be recalculated.
# If the field is a transformed field, then it will resave that transformed
# field. If it is a regular field, it will save all the transformations
# for that field.
</span>python manage.py retransform app.model.<span class="operator">[</span>field<span class="operator">]</span>
</pre>
</div>
</div>
<div class="section" id="contributing">
<h1>Contributing</h1>
<p>If you find issues or would like to see a feature suppored, head over to
the <a class="reference external" href="https://github.com/saulshanabrook/django-simpleimages/issues">issues section:</a> and report it.</p>
<p>To contribute code in any form, fork the <a class="reference external" href="https://github.com/saulshanabrook/django-simpleimages">github repository:</a> and clone it locally.
Create a new branch for your feature:</p>
<pre class="literal-block">
git commit -b feature/whatever-you-like
</pre>
<p>Then make sure all the tests past (and write new ones for any new features):</p>
<pre class="literal-block">
make install_dev
make test
</pre>
<p>Then push the finished feature to github and open a pull request form the branch.</p>
<div class="section" id="new-release">
<h2>New Release</h2>
<p>To create a new release:</p>
<ol class="arabic simple">
<li>Add changes to <cite>CHANGES.txt</cite></li>
<li>Change version in <cite>setup.py</cite></li>
<li><cite>python setup.py register</cite></li>
<li><cite>python setup.py sdist upload</cite></li>
</ol>
</div>
</div>
</div>
</body>
</html>
